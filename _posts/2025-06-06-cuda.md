---
title: cuda
date: 2025-06-06 01:00:00 +/-TTTT
categories: [AI,system]
tags: [AI,system ]  # TAG names should always be lowercase
---
# CUDAç®—å­å­¦ä¹ 


## cpp review
### å®¹å™¨
####  ä¸€ã€`unordered_map` çš„æ–¹æ³•å’Œç”¨æ³•ï¼ˆå¤´æ–‡ä»¶ï¼š`#include <unordered_map>`ï¼‰

#####  å¸¸è§å£°æ˜

```cpp
std::unordered_map<KeyType, ValueType> mp;
```

#####  å¸¸ç”¨æ–¹æ³•ä¸æ¥å£

| æ–¹æ³•                      | è¯´æ˜                                                              |
| ------------------------- | ----------------------------------------------------------------- |
| `mp[key]`                 | è®¿é—®ï¼ˆæˆ–æ’å…¥ï¼‰æŒ‡å®šé”®çš„å€¼ã€‚å¦‚æœ key ä¸å­˜åœ¨ä¼šé»˜è®¤æ’å…¥ `ValueType()` |
| `mp.at(key)`              | è®¿é—®æŒ‡å®šé”®çš„å€¼ï¼ˆä¸æ’å…¥ï¼‰ã€‚å¦‚æœ key ä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸               |
| `mp.insert({key, value})` | æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ã€‚è‹¥ key å·²å­˜åœ¨ï¼Œä¸åšä¿®æ”¹                           |
| `mp.count(key)`           | è¿”å› key æ˜¯å¦å­˜åœ¨ï¼ˆç»“æœæ˜¯ 0 æˆ– 1ï¼‰                                |
| `mp.find(key)`            | è¿”å›æŒ‡å‘è¯¥å…ƒç´ çš„è¿­ä»£å™¨ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› `mp.end()`                   |
| `mp.erase(key)`           | åˆ é™¤æŒ‡å®š key                                                      |
| `mp.clear()`              | æ¸…ç©ºæ•´ä¸ª map                                                      |
| `mp.size()`               | è¿”å›é”®å€¼å¯¹æ•°é‡                                                    |
| `mp.empty()`              | åˆ¤æ–­æ˜¯å¦ä¸ºç©º                                                      |
| `mp.begin(), mp.end()`    | è·å–è¿­ä»£å™¨èŒƒå›´ï¼ˆç”¨äºéå†ï¼‰                                        |

##### ğŸ” ç¤ºä¾‹ï¼šéå† `unordered_map`

```cpp
for (auto it = mp.begin(); it != mp.end(); ++it) {
    std::cout << "Key: " << it->first << ", Value: " << it->second << std::endl;
}
```

##### è¯´æ˜

* `it` æ˜¯ä¸€ä¸ªæŒ‡å‘ `std::pair<const KeyType, ValueType>` çš„è¿­ä»£å™¨
* `it->first` æ˜¯é”®ï¼ˆkeyï¼‰
* `it->second` æ˜¯å€¼ï¼ˆvalueï¼‰

---

####  äºŒã€`vector` çš„æ–¹æ³•å’Œæ¥å£ï¼ˆå¤´æ–‡ä»¶ï¼š`#include <vector>`ï¼‰

#####  å¸¸è§å£°æ˜

```cpp
std::vector<T> vec;
```

#####  å¸¸ç”¨æ–¹æ³•ä¸æ¥å£

| æ–¹æ³•                         | è¯´æ˜                             |
| ---------------------------- | -------------------------------- |
| `vec.push_back(value)`       | æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆæ‹·è´æ„é€ ï¼‰     |
| `vec.emplace_back(args...)`  | æœ«å°¾åŸåœ°æ„é€ ä¸€ä¸ªå…ƒç´ ï¼ˆæ›´å¿«ï¼‰     |
| `vec[i]` æˆ– `vec.at(i)`      | è®¿é—®ç¬¬ i ä¸ªå…ƒç´ ï¼Œ`at` å¸¦è¶Šç•Œæ£€æŸ¥ |
| `vec.size()`                 | å…ƒç´ ä¸ªæ•°                         |
| `vec.empty()`                | æ˜¯å¦ä¸ºç©º                         |
| `vec.clear()`                | æ¸…ç©ºæ‰€æœ‰å…ƒç´                      |
| `vec.erase(it)`              | åˆ é™¤æŸä¸ªä½ç½®çš„å…ƒç´ ï¼ˆä¼ è¿­ä»£å™¨ï¼‰   |
| `vec.begin(), vec.end()`     | è·å–èµ·å§‹ä¸ç»ˆæ­¢è¿­ä»£å™¨             |
| `vec.insert(it, value)`      | åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´            |
| `vec.resize(n)`              | è°ƒæ•´å¤§å°                         |
| `vec.front()` / `vec.back()` | è¿”å›é¦–å…ƒç´  / å°¾å…ƒç´               |



---

#### `it->second` 

åœ¨éå† `unordered_map<string, vector<string>> mp` æ—¶ï¼š

```cpp
for (auto it = mp.begin(); it != mp.end(); ++it) {
    auto key = it->first;
    auto val_vec = it->second;
}
```

* `it` æ˜¯ `std::unordered_map<string, vector<string>>::iterator`
* `*it` æ˜¯ä¸€ä¸ª `std::pair<const string, vector<string>>`
* `it->first` æ˜¯é”®ï¼Œ`it->second` æ˜¯å€¼ï¼ˆä¸€ä¸ª `vector<string>`ï¼‰

å³ `->second` è®¿é—®çš„æ˜¯ pair ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚



####  `std::next(it, n)`

* è¿”å›è¿­ä»£å™¨ `it` å‘åç§»åŠ¨ `n` ä¸ªä½ç½®åçš„æ–°è¿­ä»£å™¨ï¼ˆé»˜è®¤ `n=1`ï¼‰
* ä¸ä¿®æ”¹åŸè¿­ä»£å™¨

####  `std::prev(it, n)`

* è¿”å›è¿­ä»£å™¨ `it` å‘å‰ç§»åŠ¨ `n` ä¸ªä½ç½®åçš„æ–°è¿­ä»£å™¨ï¼ˆé»˜è®¤ `n=1`ï¼‰
* ä»…é€‚ç”¨äºåŒå‘è¿­ä»£å™¨ï¼ˆå¦‚ `list`, `map`ï¼‰

####  `std::distance(first, last)`

* è¿”å›ä¸¤ä¸ªè¿­ä»£å™¨é—´çš„è·ç¦»ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰
* ç»“æœä¸ºæ•´æ•°ï¼Œè¡¨ç¤ºä» `first` åˆ° `last` ç§»åŠ¨äº†å¤šå°‘æ­¥
#### `std::unordered_set` å¸¸ç”¨æ¥å£ä¸ç”¨æ³•é€ŸæŸ¥è¡¨

| åˆ†ç±»    | æ¥å£/è¯­æ³•                                            | è¯´æ˜                               | æ—¶é—´å¤æ‚åº¦           |
| ----- | ------------------------------------------------ | -------------------------------- | --------------- |
| åŸºæœ¬æ“ä½œ  | `unordered_set<T> s;`                            | åˆ›å»ºä¸€ä¸ªç©ºé›†åˆ                          | O(1)            |
|       | `s.insert(x);`                                   | æ’å…¥å…ƒç´  `x`ï¼Œè‹¥å·²å­˜åœ¨ä¸ä¼šé‡å¤æ’å…¥              | å¹³å‡ O(1)ï¼Œæœ€å O(n) |
|       | `s.erase(x);`                                    | åˆ é™¤å…ƒç´  `x`ï¼Œè‹¥ä¸å­˜åœ¨åˆ™æ— æ“ä½œ                | å¹³å‡ O(1)ï¼Œæœ€å O(n) |
|       | `s.clear();`                                     | æ¸…ç©ºé›†åˆæ‰€æœ‰å…ƒç´                          | O(n)            |
|       | `s.size();`                                      | è¿”å›å½“å‰å…ƒç´ æ•°é‡                         | O(1)            |
|       | `s.empty();`                                     | åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º                         | O(1)            |
| æŸ¥æ‰¾ç›¸å…³  | `s.count(x)`                                     | åˆ¤æ–­å…ƒç´  `x` æ˜¯å¦å­˜åœ¨ï¼šå­˜åœ¨è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0      | å¹³å‡ O(1)         |
|       | `s.find(x)`                                      | è¿”å›æŒ‡å‘å…ƒç´  `x` çš„è¿­ä»£å™¨ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› `s.end()` | å¹³å‡ O(1)         |
|       | `s.contains(x)` *(C++20+)*                       | åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«å…ƒç´  `x`ï¼ˆæ›´ç®€æ´ï¼‰             | å¹³å‡ O(1)         |
| éå†    | `for (auto x : s)`                               | èŒƒå›´ for å¾ªç¯éå†æ‰€æœ‰å…ƒç´                   | O(n)            |
|       | `for (auto it = s.begin(); it != s.end(); ++it)` | é€šè¿‡è¿­ä»£å™¨éå†æ‰€æœ‰å…ƒç´                       | O(n)            |
| è¿­ä»£å™¨ç›¸å…³ | `s.begin()`                                      | è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼ˆæ— åºï¼‰                | O(1)            |
|       | `s.end()`                                        | è¿”å›è¶…å°¾è¿­ä»£å™¨                          | O(1)            |
| å“ˆå¸Œç›¸å…³  | `s.bucket_count()`                               | è¿”å›å½“å‰ä½¿ç”¨çš„å“ˆå¸Œæ¡¶æ•°é‡                     | O(1)            |
|       | `s.load_factor()`                                | è¿”å›å½“å‰è´Ÿè½½å› å­ï¼ˆå…ƒç´ æ•° / æ¡¶æ•°ï¼‰               | O(1)            |
|       | `s.rehash(n)`                                    | é‡æ–°ç»„ç»‡å“ˆå¸Œæ¡¶æ•°é‡ï¼Œè‡³å°‘ä¸º n                  | O(n)            |
