---
title: cuda
date: 2025-06-06 01:00:00 +/-TTTT
categories: [AI,system]
tags: [AI,system ]  # TAG names should always be lowercase
---
# CUDAç®—å­å­¦ä¹ 


## cpp review
### å®¹å™¨
#### ğŸ§© ä¸€ã€`unordered_map` çš„æ–¹æ³•å’Œç”¨æ³•ï¼ˆå¤´æ–‡ä»¶ï¼š`#include <unordered_map>`ï¼‰

##### âœ… å¸¸è§å£°æ˜

```cpp
std::unordered_map<KeyType, ValueType> mp;
```

##### âœ… å¸¸ç”¨æ–¹æ³•ä¸æ¥å£

| æ–¹æ³•                      | è¯´æ˜                                                              |
| ------------------------- | ----------------------------------------------------------------- |
| `mp[key]`                 | è®¿é—®ï¼ˆæˆ–æ’å…¥ï¼‰æŒ‡å®šé”®çš„å€¼ã€‚å¦‚æœ key ä¸å­˜åœ¨ä¼šé»˜è®¤æ’å…¥ `ValueType()` |
| `mp.at(key)`              | è®¿é—®æŒ‡å®šé”®çš„å€¼ï¼ˆä¸æ’å…¥ï¼‰ã€‚å¦‚æœ key ä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸               |
| `mp.insert({key, value})` | æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ã€‚è‹¥ key å·²å­˜åœ¨ï¼Œä¸åšä¿®æ”¹                           |
| `mp.count(key)`           | è¿”å› key æ˜¯å¦å­˜åœ¨ï¼ˆç»“æœæ˜¯ 0 æˆ– 1ï¼‰                                |
| `mp.find(key)`            | è¿”å›æŒ‡å‘è¯¥å…ƒç´ çš„è¿­ä»£å™¨ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› `mp.end()`                   |
| `mp.erase(key)`           | åˆ é™¤æŒ‡å®š key                                                      |
| `mp.clear()`              | æ¸…ç©ºæ•´ä¸ª map                                                      |
| `mp.size()`               | è¿”å›é”®å€¼å¯¹æ•°é‡                                                    |
| `mp.empty()`              | åˆ¤æ–­æ˜¯å¦ä¸ºç©º                                                      |
| `mp.begin(), mp.end()`    | è·å–è¿­ä»£å™¨èŒƒå›´ï¼ˆç”¨äºéå†ï¼‰                                        |

##### ğŸ” ç¤ºä¾‹ï¼šéå† `unordered_map`

```cpp
for (auto it = mp.begin(); it != mp.end(); ++it) {
    std::cout << "Key: " << it->first << ", Value: " << it->second << std::endl;
}
```

##### ğŸ‘‡è¯´æ˜

* `it` æ˜¯ä¸€ä¸ªæŒ‡å‘ `std::pair<const KeyType, ValueType>` çš„è¿­ä»£å™¨
* `it->first` æ˜¯é”®ï¼ˆkeyï¼‰
* `it->second` æ˜¯å€¼ï¼ˆvalueï¼‰

---

#### ğŸ“¦ äºŒã€`vector` çš„æ–¹æ³•å’Œæ¥å£ï¼ˆå¤´æ–‡ä»¶ï¼š`#include <vector>`ï¼‰

##### âœ… å¸¸è§å£°æ˜

```cpp
std::vector<T> vec;
```

##### âœ… å¸¸ç”¨æ–¹æ³•ä¸æ¥å£

| æ–¹æ³•                         | è¯´æ˜                             |
| ---------------------------- | -------------------------------- |
| `vec.push_back(value)`       | æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆæ‹·è´æ„é€ ï¼‰     |
| `vec.emplace_back(args...)`  | æœ«å°¾åŸåœ°æ„é€ ä¸€ä¸ªå…ƒç´ ï¼ˆæ›´å¿«ï¼‰     |
| `vec[i]` æˆ– `vec.at(i)`      | è®¿é—®ç¬¬ i ä¸ªå…ƒç´ ï¼Œ`at` å¸¦è¶Šç•Œæ£€æŸ¥ |
| `vec.size()`                 | å…ƒç´ ä¸ªæ•°                         |
| `vec.empty()`                | æ˜¯å¦ä¸ºç©º                         |
| `vec.clear()`                | æ¸…ç©ºæ‰€æœ‰å…ƒç´                      |
| `vec.erase(it)`              | åˆ é™¤æŸä¸ªä½ç½®çš„å…ƒç´ ï¼ˆä¼ è¿­ä»£å™¨ï¼‰   |
| `vec.begin(), vec.end()`     | è·å–èµ·å§‹ä¸ç»ˆæ­¢è¿­ä»£å™¨             |
| `vec.insert(it, value)`      | åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´            |
| `vec.resize(n)`              | è°ƒæ•´å¤§å°                         |
| `vec.front()` / `vec.back()` | è¿”å›é¦–å…ƒç´  / å°¾å…ƒç´               |

##### ğŸ” ç¤ºä¾‹ï¼šéå† `vector`

```cpp
for (const auto& val : vec) {
    std::cout << val << std::endl;
}
```

---

#### ğŸ¯ ç‰¹åˆ«è§£é‡Šï¼š`it->second` æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

åœ¨éå† `unordered_map<string, vector<string>> mp` æ—¶ï¼š

```cpp
for (auto it = mp.begin(); it != mp.end(); ++it) {
    auto key = it->first;
    auto val_vec = it->second;
}
```

* `it` æ˜¯ `std::unordered_map<string, vector<string>>::iterator`
* `*it` æ˜¯ä¸€ä¸ª `std::pair<const string, vector<string>>`
* `it->first` æ˜¯é”®ï¼Œ`it->second` æ˜¯å€¼ï¼ˆä¸€ä¸ª `vector<string>`ï¼‰

å³ `->second` è®¿é—®çš„æ˜¯ pair ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚

---

#### âœ… æ€»ç»“å°æŠ„

| è¡¨è¾¾å¼                  | å«ä¹‰                               |
| ----------------------- | ---------------------------------- |
| `mp[key]`               | è·å–é”®å¯¹åº”çš„å€¼ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥é»˜è®¤å€¼ |
| `mp.at(key)`            | è·å–é”®å¯¹åº”çš„å€¼ï¼Œä¸å­˜åœ¨æŠ›å¼‚å¸¸       |
| `it->first`             | å½“å‰è¿­ä»£å™¨æŒ‡å‘çš„é”®                 |
| `it->second`            | å½“å‰è¿­ä»£å™¨æŒ‡å‘çš„å€¼                 |
| `vec.emplace_back(val)` | åŸåœ°æ·»åŠ å…ƒç´                        |
| `vec[i]`                | è®¿é—®ç¬¬ i ä¸ªå…ƒç´                     |
| `vec.size()`            | è¿”å›å…ƒç´ ä¸ªæ•°                       |

åœ¨ C++ ä¸­ï¼Œ**è¿­ä»£å™¨çš„â€œä¸‹ä¸€ä¸ªâ€**æŒ‡çš„æ˜¯æŒ‡å‘å®¹å™¨ä¸­**å½“å‰å…ƒç´ ä¹‹åçš„ä¸€ä¸ªå…ƒç´ **ï¼Œä½ å¯ä»¥é€šè¿‡ `++it` æˆ– `std::next(it)` è·å–ã€‚

---

### âœ… ä¸€ã€è·å–è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ–¹æ³•

#### 1. `++it`ï¼ˆå‰ç¼€é€’å¢ï¼‰

```cpp
auto it = container.begin();
++it; // it ç°åœ¨æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ 
```

* æœ€å¸¸è§çš„å†™æ³•ã€‚
* ä¿®æ”¹åŸ `it` æœ¬èº«ï¼Œä½¿å…¶å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚

#### 2. `std::next(it)`

```cpp
#include <iterator>

auto next_it = std::next(it); // è¿”å› it çš„ä¸‹ä¸€ä¸ªè¿­ä»£å™¨
```

* ä¸ä¿®æ”¹ `it`ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ï¼ˆå€¼ä¼ é€’ï¼‰
* è¯­ä¹‰æ¸…æ™°ï¼Œé€‚åˆéœ€è¦ä¿ç•™åŸè¿­ä»£å™¨çš„åœºæ™¯
* ä¹Ÿå¯ä»¥æŒ‡å®šæ­¥é•¿ï¼š`std::next(it, 2)` è¡¨ç¤ºå‰è¿›ä¸¤ä¸ªä½ç½®

#### 3. `it++`ï¼ˆåç¼€é€’å¢ï¼‰

```cpp
auto old_it = it++;
```

* ä¼šå…ˆä¿ç•™åŸå€¼ï¼Œå†ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªï¼Œæ•ˆç‡ç•¥ä½äº `++it`ï¼Œä½†ç”¨æ³•ç±»ä¼¼ã€‚
* æ›´å¸¸ç”¨äºè¡¨è¾¾å¼ä¸­ï¼Œå¦‚ï¼š

  ```cpp
  while (it++ != container.end()) // æ³¨æ„ it++ çš„è¿”å›å€¼æ˜¯æ—§å€¼
  ```

---

### âœ… äºŒã€ç¤ºä¾‹ï¼šéå†å¹¶è®¿é—®ä¸‹ä¸€ä¸ª

```cpp
std::vector<int> nums = {10, 20, 30, 40};

for (auto it = nums.begin(); it != nums.end(); ++it) {
    std::cout << "Current: " << *it;
    auto next_it = std::next(it);
    if (next_it != nums.end()) {
        std::cout << ", Next: " << *next_it;
    }
    std::cout << std::endl;
}
```

**è¾“å‡ºï¼š**

```
Current: 10, Next: 20
Current: 20, Next: 30
Current: 30, Next: 40
Current: 40
```

---

### âš ï¸ æ³¨æ„äº‹é¡¹

* ä½ ä¸èƒ½å¯¹ `end()` åš `++`ï¼š`container.end()` æ˜¯**æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆä¸å­˜åœ¨å…ƒç´ ï¼‰**

  ```cpp
  ++container.end(); // âŒ æœªå®šä¹‰è¡Œä¸ºï¼ˆUBï¼‰
  ```
* å¯¹äº `map`/`unordered_map` è¿™æ ·çš„å®¹å™¨ï¼Œ`it->second` è·å–çš„æ˜¯å½“å‰å…ƒç´ çš„å€¼ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `std::next(it)->second` è®¿é—®ä¸‹ä¸€ä¸ªå€¼ï¼ˆä½†è¦ç¡®ä¿ä¸è¶Šç•Œï¼‰ã€‚

---

### âœ… æ€»ç»“å°æŠ„

| è¡¨è¾¾å¼             | è¯´æ˜                               |
| ------------------ | ---------------------------------- |
| `++it`             | åŸåœ°ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ª                   |
| `std::next(it)`    | è·å–ä¸‹ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆä¸ä¿®æ”¹åŸ itï¼‰    |
| `it++`             | å…ˆè¿”å›å½“å‰ï¼Œå†ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ª         |
| `std::next(it, n)` | å‘å‰ç§»åŠ¨ n ä¸ªä½ç½®                  |
| `std::prev(it)`    | è·å–å‰ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆåŒå‘å®¹å™¨ä¸­å¯ç”¨ï¼‰ |

éœ€è¦æˆ‘è®² `prev()`ã€`distance()`ã€æˆ–è‡ªå®šä¹‰ç»“æ„å¦‚ä½•å®ç°è¿­ä»£å™¨å—ï¼Ÿ
